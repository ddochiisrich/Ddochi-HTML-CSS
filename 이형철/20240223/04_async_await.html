<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>async_await</title>
  <style>
    div{
      display: grid;
      grid-template-columns: 1fr 1fr;
    }
    table{
      background-color: black;
      margin: 10px;
      border-radius: 5px;
    }
    th{
      background-color: lightseagreen;
      padding: 5px;
      width: 100px;
    }
    td{
      background-color: lightcoral;
      padding: 5px;
    }
  </style>
</head>
<body>
  <div id="result"></div>

  <script>
    // 2. fetch 불러오다 then 그 다음에
    // fetch("https://jsonplaceholder.typicode.com/users")
    // .then(response => response.json())
    // .then(users => console.log(users));
    // 콘솔에서 확인하기


    // 3. async_await
    // async는 비동기방식. await 불러왔을때까지 기다리는것.
    async function init(){
      const response = await fetch("https://jsonplaceholder.typicode.com/users")
      const users = await response.json();
      console.log(users);
      display(users) // 필요 정보만 표시
    }
    function display(users){ // users를 받아와서 함수실행
      const result = document.querySelector("#result");
      let string = "";
      users.forEach(user => {
        string += `<table>
          <tr>
            <th>이름</th> <td>${user.name}</td>
          </tr>
          <tr>
            <th>아이디</th> <td>${user.username}</td>
          </tr>  
          <tr>
            <th>이메일</th> <td>${user.email}</td>
          </tr>  
          <tr>
            <th>전화번호</th> <td>${user.phone}</td>
          </tr>  
          <tr>
            <th>회사</th> <td>${user.company.name}</td>
          </tr>  
          <tr>
            <th>주소</th> <td>${user.address.street}</td>
          </tr>  
          <tr>
            <th>우편번호</th> <td>${user.address.zipcode}</td>
          </tr>  
          <tr>
            <th>웹사이트</th> <td>${user.website}</td>
          </tr>  
        </table>`;
      })
      result.innerHTML = string;
    }
    init() // 함수 실행부분 (호출)
  </script>
</body>
</html>